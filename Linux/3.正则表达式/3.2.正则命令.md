# 正则命令
## grep/egrep/fgrep 命令
``` Shell
grep [选项] 模式 [文件名列表]
egrep # 使用扩展正则表达式ERE描述模式，相当于 grep -E  
fgrep # 快速搜索指定字符串  
```
Global regular expression print  
**功能**：grep 命令用于查找输入内容中符合条件的字符串，并输出相关行 

常用选项：  
**-E**：启用 extended RegExs  
**-P**：启用 perl RegExs 
**-n**：每行前面显示行号  
**-v**：仅显示所有不包含模式的行  
**-i**：忽略大小写  
**-r**：当匹配到目录时，递归匹配目录中的文件  
**-c 或 --count**：仅显示匹配的次数  

---------------

## sed 命令
``` Shell
sed [选项] 命令 [文件]
sed –e 命令1 –e 命令2 –e 命令3 [文件名] # 多命令时使用-e 选项，实际上只有一个命令时只是省略了 -e
sed -f 命令文件 [文件名]    # 从指定文件中读取命令
sed -E 命令 [文件]  # 使用 ERE
```
流编辑命令  
**功能**：将指定的输入内容以相应的命令进行处理，并将结果输出到标准输出中。( sed 并不会对文件本身进行修改)  


### 动作
以下出现的 “指定行” 均可以通过行数或者正则表达式 /regexpr/ 指定。如果省略指定行，则匹配所有行。  
并且指定行可以是一个范围，如 `2,4` 表示2、3、4行
1. **指定行/a字符串**：append新增，在指定行的后新增一行内容为指定字符串的行。
2. **指定行/d**：delete删除，删除指定行的内容。 
3. **指定行/s/旧字串/新字串/g**：取代，将指定行的旧字串替换为新字串。通常这个 s 的动作可以搭配正规表示法  
4. **指定行/p**：显示指定行。但是实际上是在原文的基础上再重复指定行，所以通常与 `-n` 参数搭配来仅显示匹配上的行  
5. **指定行/{命令1;命令2...}**：可以在指定行中将上述的动作组合起来使用，并使用分号分隔  

**需要特别说明的是**：  
在正则表达式**替换**中，可以对 “()” 进行转义，即使用 “\\(” 和 “\\)” 将部分正则表达式的模式包围起来。  
**此时括号仅表示分组意义，而不会去匹配括号**。被包围的部分模式成为一组，之后在替换时可以用 “\1” 表示第1个分组这个整体，以此类推。其中 “\0” 表示整个匹配整体  

**!! 在 ERE 中 () 也看作元字符，所以这种方式会失效，不要一起用**  

**此时命令必须看作是字符串形式，即使用引号包围**  
``` Shell
# 假设有一文件 demo.txt 内容为 9-8
sed 's/\([0-9]\)-\([0-9]\)/\2-\1/g' demo.txt
# 此时 \1 和 \2 分别表示匹配到的第一、二个分组，即 9、8
# 输出为 8-9
```

<!-- 先掌握以上三种吧
1. **c**：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行  
2. **i**：insert插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)  
-->

-----------

## awk 命令
``` Shell
awk 程序 文件名列表
awk -f 程序文件名 文件名列表    # 从文件中读取程序
```
**功能**：awk 是逐行扫描进行文本处理的一门语言，其中**程序格式为 “条件{动作}”**，对每行进行条件判断，若条件符合则执行动作  
多段动作间使用空格或分号隔开  
**在有多个程序时，是每行都执行所有的程序后才跳到下一行**  

a.w.k分别为该程序的三位设计者姓氏的第一个字母  

### 执行过程
**输入文件的每行作为一个“记录”，变量NR就是行号**  
**每行用若干空格分隔开的部分，叫做记录的“域”。每个域都只含非空格符号**  
内置变量 \$1 是第1域内容，依次， \$2 是第2域内容，……  
特别的， \$0 指的是整个这一行的内容  

### 条件
条件中可以使用：  
* **比较运算符** 
* **逻辑运算符**：类似 C 语言的与或非  
* **正则表达式的模式匹配**：/regexpr/ (使用 ERE) 
* **特殊的条件** ：  
  不指定任何条件，对所有文本行执行动作  
  BEGIN 开始处理所有文本行之前执行动作  
  END 处理完所有文本行之后执行动作  

### 动作
* **自定义变量**  
* **加减乘除等算术逻辑运算**  
* **正则表达式匹配运算符（用作条件判断）**  
例如： $2 ~ "[1-9][0-9]*"
* **流程控制**（与C语言类似）
* **条件判断 if**
* **循环控制 for**
* **print 变量1， 变量2，…… 或 c 语言的 printf 的格式化输出**