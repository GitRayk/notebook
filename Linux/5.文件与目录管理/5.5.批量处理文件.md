# 批量处理文件
考虑这样一个问题：  
``` Shell
find src -name \*.c -exec grep -n -- --help {} /dev/null \;
```
借助find的“壳”功能去遍历目录，对遍历到的每个符合条件的文件执行grep命令  
(如果仅有一个文件，grep 匹配时是不会输出文件名的，所以同时使用 /dev/null 作为查找对象。而 /dev/null 是一个永久空文件，所以对结果没有影响 )

**缺点**：效率低，因为每个命中的对象都需要执行grep命令：创建一个进程，完成任务后进程消亡，然后再创建，再消亡...

所以最好的策略是：**将 find 找到的所有文件列表作为一个参数，同时发送给 grep，以此来仅启动一个进程**  

这就需要使用 `xargs` 命令  

------------
## xargs 命令
``` Shell
xargs [选项] 命令
命令1 | xargs [选项] 命令2
```

**功能**：将标准输入构造为命令的命令行参数  

**不要试图从标准输入中将未经过 shell 处理的文件通配符传递进去，这是错误的一种做法**  

该方法通常结合 find 命令和管道一起使用，以提高执行效率  

如上例中，代码应该修改为：  
``` Shell
find src -name \*.c –print | xargs grep -n -- --help
```

**如果参数的数量过多，xagrs 会自动将参数截断，并多次执行后面的命令，每次处理一部分的参数**(命令行参数占满128K字节)  
所以该命令还可以处理参数过多，缓冲区受限而无法展开的问题  

**该命令常用选项**：  
* **-a 文件**：从文件中读取参数  
* **-n 数字**：一次执行时使用的参数个数，默认是全用(会执行多次)  