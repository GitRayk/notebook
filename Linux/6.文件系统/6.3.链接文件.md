# 链接文件
链接分为**硬链接**与**软连接**  
创建一个链接文件需要使用命令 `ln`  
不论是哪种链接文件都只会占用很小的一部分空间或根本不占用  

-----------------
## 硬链接
目录表中的目录项可以看作是一个 “文件名 - inode” 对  
**同一个 inode 每有一个文件名映射关系，就叫做1个硬链接**  

而 link 数就是指同一个 inode 被目录项引用的次数

你也可以看作它是一个指针，指向源文件的 inode，对同一个文件的硬链接，系统并不为它重新分配 inode  
inode 可以通过 `ls -i` 查看  

这意味着**只要有一个硬链接存在，这个文件就不会因为其它硬链接文件的删除而被删除(即文件的引用计数不为0)**  

在 `ll` 命令中可以查看到文件的硬链接计数  

**但是所有硬链接文件都指向了同一个文件实体，所有对任意一个的修改都会反应到所有的硬链接文件当中**  

**为了找到所有拥有相同 inode 的文件，可以使用以下命令**:  
``` Shell
find 路径 -samefile 指定文件
find 路径 -inum inode值
```

创建硬链接的命令：  
``` Shell
ln 源文件路径 目的文件路径
```

**需要注意的是，不允许对目录使用该命令创建硬链接**  

**一般来说，目录的 link 数=直接子目录数 + 2。**(因为每个子目录中都含有一个 .. 目录引用，然后还有它本身目录文件和它的 . 目录引用)

---------------

## 软链接
软链接又叫符号链接(symbolic link)，相当于 windows 系统下的一个快捷方式  

软链接文件的内容是源文件的路径指针，通过该链接可以访问到源文件。
**删除软链接文件对源文件无影响，但是删除源文件，软链接文件就会找不到要指向的文件**  

当在系统中通过 `ll` 命令查看文件时，软链接文件会通过 “->” 指向一个路径，指向的路径就是源文件的存储路径  

**值得注意的是，如果路径使用的是相对路径，那么软链接文件中保存的路径指针也只会是相对的，一旦源文件和链接文件的相对路径变化，软链接文件就会失效，所以务必使用绝对路径**

创建软链接的命令：  
``` Shell
ln -s 源文件路径 目的文件路径
```

---------------

## 区别

### 软链接：  
1. **软链接，以路径的形式存在**。类似于Windows操作系统中的快捷方式  
2. **软链接可以跨文件系统 ，硬链接不可以**  
3. **软链接可以对一个不存在的文件名进行链接**  
4. 软链接可以对目录进行链接  

### 硬链接：  
1. 硬链接，以文件副本的形式存在。**但不占用实际空间**  
2. **不允许给目录创建硬链接**  
3. **硬链接只有在同一个文件系统中才能创建**  