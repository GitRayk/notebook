# 流程控制
## 逻辑判断
**可以通过内部变量 `\$?` 获取上一条命令的返回码(错误码)，为0时表示成功**  

执行 c 程序时，该值就是程序的 main 返回值  

**执行多个命令时，仅表示最后一条命令的返回码**  

系统中有**两个特殊的程序**:  
`/bin/true`：返回码总是0  
`/bin/false`：返回码总是非0  

-----------------
### test 命令
``` Shell
test 变量或值 选项 变量或值
```

**功能**：根据后续的参数设置返回码  

**该命令位于 `/usr/bin` 目录，同位置还有个 `/usr/bin/[` 程序，其基本功能与 test 一致，但是最后一个参数必须是 “]”**  

(有的 Linux 系统将/usr/bin/[ 作为 test 的一个符号连接)  

也就是说，**下述命令是等价的**：  
``` Shell
test 1 -eq 2
[1 -eq 2]
```

**选项**：(注意参数之间的空格)  
* 数值测试  
  * **-eq**：等于则执行成功  
  * **-ne**：不等于  
  * **-gt**：大于  
  * **-ge**：大于等于  
  * **-lt**：小于  
  * **-le**：小于等于  

* 字符串测试
  * **=**：等于  
  * **!=**：不等于  
  * **-z 字符串**：字符串长度为0  
  * **-n 字符串**：字符串长度不为0  

* 文件测试
  * **-e 文件名**：文件存在  
  * **-r 文件名**：文件存在且可读  
  * **-w 文件名**：文件存在且课写  
  * **-x 文件名**：文件存在且可执行  
  * **-d 文件名**：文件存在且为目录  
  * **-f 文件名**：文件存在且为普通文件  

* 逻辑
  * **!**：非  
  * **-o**：或  
  * **-a**：与  

可以通过 test 程序，结合 Shell 的 if 语句进行条件判断  

-----------------
## 命令组合
### 复合逻辑
多个命令的连接：  
* **&&**：若前者返回0，则继续执行后者，否则不执行后者  
* **||**：若前者失败则执行后者，否则不执行后者  

### 命令块
``` Shell
(命令1; 命令2 ... )
{ 命令1; 命令2; ... }
```

需要注意的点：  
1. 左花括号后必须有个空格  
2. 花括号中每条命令后必须用 “;” 或 换行 表示结束  

-----------------
## if 语句
``` Shell
if 条件
    then 命令列表
elif 条件
    then 命令列表
else
    命令列表
fi
```
其中，`if/then/elif/else/fi` 均为关键字(内部命令)  

条件也可以通过任意程序的返回码来判断  

**命令列表可以分行出现，不需要其它符号**  

--------------------
## case 语句
``` Shell
case 变量或值 in
    模式1) 命令列表;;
    模式2) 命令列表;;
    ...
esac
```

**注意点**：  
1. 多个相同命令的模式可以在括号左边用 “|” 隔开  
2. 匹配到多个模式时，只会执行第一个遇到的  
3. “;;” 是一个整体，不可分隔  

--------------------
## 注释
**在 Shell 中以 “#” 开头时，后面的所有字符都被当作单行注释**  

在脚本文件中也是如此  

但有一点不同，**脚本文件第一行若出现 `#!` 则表示指定脚本的解释程序**  