# ssh与密钥
## ssh
ssh 是指 Secure Shell 安全外壳，它定义了一种远程访问主机的安全手段  

**ssh 使用 22 端口**  

使用 ssh 登录的命令为(在本地使用):  
``` Shell
ssh [选项] 用户名@目的IP[:路径]
```

常用的选项有：  
* **-p 端口** 以指定的端口进行登录  
* **-i 文件路径** 指定私钥文件以登录。
  **当不指定私钥的时候，默认是使用 当前账户目录/.ssh/id_rsa 作为私钥的**


### 两种登录方式
1. **口令登录**  
   即使用密码登录，但这种方法并不安全，默认的 sshd 服务是不支持使用的，需要手动打开。  
   sshd 服务的配置文件为 `/etc/ssh/sshd_config` ，该文件中的 **PasswordAuthentication** 的值表示是否支持口令登录。当该文件改变时，需要重启 sshd 服务才会生效：`sudo service sshd restart`  
2. **密钥登录**  
   登录过程涉及两个文件：公钥文件和私钥(密钥)文件，其中**公钥保存在服务器上的 `对应账户目录/.ssh/authorized_keys`** 文件中  
   **私钥保存在本地机上，通常是在 `当前账户目录/.ssh/id_rsa`** 文件中  
   #### 登录过程
   登录时，服务器将公钥发送给本地机，然后本地机通过得到的公钥与自己的私钥计算出值后加密返给服务器，服务器解密后校验身份，正确则允许登录  
   
   在本地机中，所有已经被识别过的公钥保存在 `当前账户目录/.ssh/known_hosts` 文件中

## 密钥
### 产生密钥
``` Shell
ssh-keygen [选项]
```
该命令会在指定的路径中产生 `id_rsa 密钥文件、id_rsa.pub 公钥文件` (也可以自定义文件名)  

常用选项：  
* **-t**：指定加密方式，默认为 rsa，可以修改为 dsa  
* **-C**：添加注释